var n=Symbol("stream"),t=Symbol("stop"),r=Symbol("reset"),o=function(o){var e=[],i=[];void 0!==o&&i.push(o);var u,f=o,c=function(n,t){var r;t=[].concat(t);var o=function(){u===r&&(u=void 0);var o=function(n,t){var r=function(){if(t.length>0){var o=t.shift()(n);return o instanceof Promise?o.then(function(){return r()}):r()}};return r()}(n,t);o instanceof Promise&&(u=o)};u?(r=u.then(o),u=r):o()},a=function(n){return o!==t&&void 0!==n&&(void 0!==n&&(o=n),n===r&&(o=f,i=[]),e.length>0?c(n,e):n!==r&&i.push(n),n===t&&(e.length=0,i.length=0)),o};return a.on=function(n){if(o!==t)return e.push(n),i.length>0&&(i=i.filter(function(n){return c(n,e),!1})),function(){e.splice(e.indexOf(n),1)}},a.stop=function(){a(t)},a.reset=function(){a(r)},a.hasListeners=function(){return e.length>0},a.is=n,a},e=function(n,e,i){var u,f=i||e.pop(),c=o();return f.on(function(n){n!==t&&n!==r?c(n):u(n)}),u=n.apply(n,e.concat([c]))},i=function(t){return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];var i=r[r.length-1];return"function"==typeof i&&i.is===n?e(t,r):function(n){return e(t,r,n)}}},u=i(function(n,t){var r=o();return t.on(function(t){var o=n(t);return o instanceof Promise?o.then(function(n){o&&r(t)}):o&&r(t),o}),r}),f=i(function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];for(var r=n.pop(),o=0,e=n;o<e.length;o+=1)r=(0,e[o])(r);return r}),c=i(function(n,t){var r=o();return t.on(function(t){var o=n.apply(n,[t]);return o instanceof Promise?o.then(function(n){return r(n)}):r(o),o}),r}),a=c(function(n){return void 0===this.sum&&(this.sum=0),this.sum+=n});exports.stream=o,exports.filter=u,exports.pipe=f,exports.map=c,exports.merge=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];for(var r=o(),e=0,i=n;e<i.length;e+=1)i[e].on(function(n){return r(n)});return r},exports.operator=i,exports.sum=a,exports.combine=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var i=Array(n.length).fill(void 0);n.forEach(function(n,t){i[t]=n()});var u=o(i);return n.forEach(function(n,o){n.on(function(n){n===r||n===t?u(n):(i[o]=n,u([].concat(i)))})}),u};
//# sourceMappingURL=mosella.js.map
