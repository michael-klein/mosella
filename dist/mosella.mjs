var n=Symbol("stream"),t=Symbol("stop"),r=Symbol("reset"),o=function(o){var u=[],e=[];void 0!==o&&e.push(o);var i,f=o,c=function(n,t){var r;t=[].concat(t);var o=function(){i===r&&(i=void 0);var o=function(n,t){var r=function(){if(t.length>0){var o=t.shift()(n);return o instanceof Promise?o.then(function(){return r()}):r()}};return r()}(n,t);o instanceof Promise&&(i=o)};i?(r=i.then(o),i=r):o()},a=function(n){return o!==t&&void 0!==n&&(void 0!==n&&(o=n),n===r&&(o=f,e=[]),u.length>0?c(n,u):n!==r&&e.push(n),n===t&&(u.length=0,e.length=0)),o};return a.on=function(n){if(o!==t)return u.push(n),e.length>0&&(e=e.filter(function(n){return c(n,u),!1})),function(){u.splice(u.indexOf(n),1)}},a.stop=function(){a(t)},a.reset=function(){a(r)},a.hasListeners=function(){return u.length>0},a.is=n,a},u=function(n,u,e){var i,f=e||u.pop(),c=o();return f.on(function(n){n!==t&&n!==r?c(n):i(n)}),i=n.apply(n,u.concat([c]))},e=function(t){return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];var e=r[r.length-1];return"function"==typeof e&&e.is===n?u(t,r):function(n){return u(t,r,n)}}},i=e(function(n,t){var r=o();return t.on(function(t){var o=n(t);return o instanceof Promise?o.then(function(n){o&&r(t)}):o&&r(t),o}),r}),f=e(function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];for(var r=n.pop(),o=0,u=n;o<u.length;o+=1)r=(0,u[o])(r);return r}),c=e(function(n,t){var r=o();return t.on(function(t){var o=n.apply(n,[t]);return o instanceof Promise?o.then(function(n){return r(n)}):r(o),o}),r}),a=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];for(var r=o(),u=0,e=n;u<e.length;u+=1)e[u].on(function(n){return r(n)});return r},s=c(function(n){return void 0===this.sum&&(this.sum=0),this.sum+=n}),h=function(){for(var n=[],u=arguments.length;u--;)n[u]=arguments[u];var e=Array(n.length).fill(void 0);n.forEach(function(n,t){e[t]=n()});var i=o(e);return n.forEach(function(n,o){n.on(function(n){n===r||n===t?i(n):(e[o]=n,i([].concat(e)))})}),i};export{o as stream,i as filter,f as pipe,c as map,a as merge,e as operator,s as sum,h as combine};
//# sourceMappingURL=mosella.mjs.map
